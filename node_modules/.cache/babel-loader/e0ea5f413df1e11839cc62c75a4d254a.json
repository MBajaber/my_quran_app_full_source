{"ast":null,"code":"import _slicedToArray from\"C:/Users/USER/Desktop/HTML/quran_project_2/quran/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"C:/Users/USER/Desktop/HTML/quran_project_2/quran/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/USER/Desktop/HTML/quran_project_2/quran/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useReducer,useState}from'react';import{ImamPageStyled}from'./imamPageStyled';import Form from'react-bootstrap/Form';import SurahBox from'../surahBox/surahBox';import axios from'../../axiosBase/createAxios';import ErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';import{connect}from'react-redux';import Loader from'../Loader/loader';import{Redirect}from'react-router-dom';import*as favoriteActions from'../../store/action/favoriteActions';import*as settingActions from'../../store/action/settingActions';import*as getDataActions from'../../store/action/getDataActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialState={suraNumbers:[],suraNames:[],allSurasBoxs:[]};var myReducer=function myReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'surahNumbers':return _objectSpread(_objectSpread({},state),{},{suraNumbers:_toConsumableArray(action.numbers)});case'surahNames':return _objectSpread(_objectSpread({},state),{},{suraNames:_toConsumableArray(action.names)});case'allSurasBoxs':return _objectSpread(_objectSpread({},state),{},{allSurasBoxs:_toConsumableArray(action.allSurasBoxes)});default:return state;}};var ImamPage=function ImamPage(_ref){var startRequest=_ref.startRequest,language=_ref.language,suras=_ref.suras,successRequest=_ref.successRequest,failRequest=_ref.failRequest,server=_ref.server,getData=_ref.getData,suraLink=_ref.suraLink,isFromFavouritePlaylist=_ref.isFromFavouritePlaylist,showPlayer=_ref.showPlayer,addToPlaylist=_ref.addToPlaylist,playlist=_ref.playlist,loading=_ref.loading,site_language=_ref.site_language,theme=_ref.theme,themeStyle=_ref.themeStyle;var _useReducer=useReducer(myReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),filterSearch=_useState4[0],setFilterSearch=_useState4[1];useEffect(function(){var isCurrent=true;var api=function api(){startRequest();axios.get(\"/translations?languages=\".concat(language.lang)).then(function(res){if(isCurrent){dispatch({type:'surahNumbers',numbers:suras});successRequest();var arrayNames=[];if(suras){suras.map(function(num){return arrayNames.push(res.data[language.lang][\"sura\".concat(num)]);});}dispatch({type:'surahNames',names:arrayNames});}}).catch(function(error){if(isCurrent){failRequest(error);}});};api();return function(){isCurrent=false;};},[language.lang]);var clickedHandler=function clickedHandler(index){var fixNum=index.length===1?\"00\".concat(index):index.length===2?\"0\".concat(index):index;suraLink(\"\".concat(server,\"/\").concat(fixNum,\".mp3\"));isFromFavouritePlaylist(false);showPlayer();};var addFavFun=function addFavFun(data,num,suraName){var setData=_objectSpread(_objectSpread({},data),{},{number:num});var collectData={allDataPlaylist:data,isFavorite:setData.isFavorite,server:\"\".concat(setData.allData.Server,\"/\").concat(setData.number,\".mp3\"),number:setData.number,name:setData.allData.name,rewaya:setData.allData.rewaya,suraName:suraName};addToPlaylist(collectData);};useEffect(function(){var array2=[];state.allSurasBoxs.filter(function(sura){if(search===''){array2=[state.allSurasBoxs];setFilterSearch(array2);}else if(sura.props.name.toLocaleLowerCase().includes(search.toLocaleLowerCase())){array2.push(/*#__PURE__*/_jsx(SurahBox,{name:sura.props.name,server:sura.props.server,number:sura.props.number,clicked:function clicked(){return clickedHandler(sura.props.number);},addFav:function addFav(data){return addFavFun(data,sura.props.number,sura.props.name);},isFavor:sura.props.isFavor,allData:sura.props.allData,copyText:sura.props.copyText},\"\".concat(server,\"/\").concat(sura.props.name,\"/\").concat(sura.props.number,\"/\").concat(sura.props.isFavor)));}return array2;});setFilterSearch(array2);},[search]);useEffect(function(){window.scrollTo(0,0);},[]);var data=/*#__PURE__*/_jsx(Loader,{});var arr=[];var suraLoop=function suraLoop(){var sing=null;if(server&&state.suraNames&&state.suraNumbers&&state.suraNumbers.length>0&&state.suraNumbers){if(playlist&&playlist.length>0){var _loop=function _loop(i){var myNumber=null;var successFav=false;myNumber=state.suraNumbers[i].length===1?\"00\".concat(state.suraNumbers[i]):state.suraNumbers[i].length===2?\"0\".concat(state.suraNumbers[i]):state.suraNumbers[i];for(var k=0;k<playlist.length;k++){sing=getData.name===playlist[k].name&&myNumber===playlist[k].number&&\"\".concat(getData.Server,\"/\").concat(myNumber,\".mp3\")===playlist[k].server&&state.suraNames[i]===playlist[k].suraName;if(sing){successFav=sing;}}arr.push(/*#__PURE__*/_jsx(SurahBox,{name:state.suraNames[i],server:getData.Server,number:myNumber,clicked:function clicked(){return clickedHandler(state.suraNumbers[i]);},addFav:function addFav(data){return addFavFun(data,myNumber,state.suraNames[i]);},isFavor:successFav,allData:getData,copyText:\"\".concat(server,\"/\").concat(myNumber,\".mp3\")},\"\".concat(server,\"/\").concat(state.suraNames[i],\"/\").concat(myNumber)));};for(var i=0;i<state.suraNumbers.length;i++){_loop(i);}}else{var _loop2=function _loop2(_i){var myNumbers=null;var successFavs=false;myNumbers=state.suraNumbers[_i].length===1?\"00\".concat(state.suraNumbers[_i]):state.suraNumbers[_i].length===2?\"0\".concat(state.suraNumbers[_i]):state.suraNumbers[_i];arr.push(/*#__PURE__*/_jsx(SurahBox,{name:state.suraNames[_i],server:getData.Server,number:myNumbers,clicked:function clicked(){return clickedHandler(state.suraNumbers[_i]);},addFav:function addFav(data){return addFavFun(data,myNumbers,state.suraNames[_i]);},isFavor:successFavs,allData:getData,copyText:\"\".concat(server,\"/\").concat(myNumbers,\".mp3\")},\"\".concat(server,\"/\").concat(state.suraNames[_i],\"/\").concat(myNumbers)));};for(var _i=0;_i<state.suraNumbers.length;_i++){_loop2(_i);}}}setFilterSearch(arr);dispatch({type:'allSurasBoxs',allSurasBoxes:arr});};useEffect(function(){server&&state.suraNames&&state.suraNumbers&&state.suraNumbers.length>0&&state.suraNumbers&&suraLoop();},[server,state.suraNames,state.suraNumbers,state.suraNumbers]);if(!loading&&site_language){data=/*#__PURE__*/_jsxs(_Fragment,{children:[getData===null?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):null,/*#__PURE__*/_jsxs(ImamPageStyled,{theme:theme,themeStyle:themeStyle,site_lang:language.lang,children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-search-rewaya mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"top-search mb-2 mb-md-0\",children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"\".concat(language.lang==='ar'?'...'+site_language.search+' '+site_language.surah_name:site_language.search+' '+site_language.surah_name+'...'),className:\"rounded-pill search-filed\",onChange:function onChange(e){return setSearch(e.target.value);},dir:\"auto\"})})})}),/*#__PURE__*/_jsx(\"ul\",{className:\"all-surah-name\",children:filterSearch})]})]});}return data;};var mapStateToprops=function mapStateToprops(state){return{getData:state.getData.getData,suras:state.getData.suras,loading:state.getData.loading,server:state.getData.server,playlist:state.fav.playlist,theme:state.theme.theme,themeStyle:state.theme.themeStyle,language:state.lang.language,site_language:state.lang.site_language};};var mapDispatchToprops=function mapDispatchToprops(dispatch){return{showPlayer:function showPlayer(){return dispatch(settingActions.showPlayer());},suraLink:function suraLink(link){return dispatch(getDataActions.suraLink(link));},startRequest:function startRequest(){return dispatch(getDataActions.startRequest());},successRequest:function successRequest(){return dispatch(getDataActions.successRequest());},failRequest:function failRequest(error){return dispatch(getDataActions.failRequest(error));},addToPlaylist:function addToPlaylist(item){return dispatch(favoriteActions.addToPlayList(item));},isFromFavouritePlaylist:function isFromFavouritePlaylist(bool){return dispatch(favoriteActions.isFromFavouritePlaylist(bool));}};};export default connect(mapStateToprops,mapDispatchToprops)(ErrorHandler(ImamPage,axios));","map":{"version":3,"sources":["C:/Users/USER/Desktop/HTML/quran_project_2/quran/src/components/imamPage/ImamPage.js"],"names":["React","useEffect","useReducer","useState","ImamPageStyled","Form","SurahBox","axios","ErrorHandler","connect","Loader","Redirect","favoriteActions","settingActions","getDataActions","initialState","suraNumbers","suraNames","allSurasBoxs","myReducer","state","action","type","numbers","names","allSurasBoxes","ImamPage","startRequest","language","suras","successRequest","failRequest","server","getData","suraLink","isFromFavouritePlaylist","showPlayer","addToPlaylist","playlist","loading","site_language","theme","themeStyle","dispatch","search","setSearch","filterSearch","setFilterSearch","isCurrent","api","get","lang","then","res","arrayNames","map","num","push","data","catch","error","clickedHandler","index","fixNum","length","addFavFun","suraName","setData","number","collectData","allDataPlaylist","isFavorite","allData","Server","name","rewaya","array2","filter","sura","props","toLocaleLowerCase","includes","isFavor","copyText","window","scrollTo","arr","suraLoop","sing","i","myNumber","successFav","k","myNumbers","successFavs","surah_name","e","target","value","mapStateToprops","fav","mapDispatchToprops","link","item","addToPlayList","bool"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\r\nimport { ImamPageStyled } from './imamPageStyled';\r\nimport Form from 'react-bootstrap/Form';\r\nimport SurahBox from '../surahBox/surahBox';\r\nimport axios from '../../axiosBase/createAxios';\r\nimport ErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport { connect } from 'react-redux';\r\nimport Loader from '../Loader/loader';\r\nimport { Redirect  } from 'react-router-dom';\r\nimport * as favoriteActions from '../../store/action/favoriteActions';\r\nimport * as settingActions from '../../store/action/settingActions';\r\nimport * as getDataActions from '../../store/action/getDataActions';\r\n\r\nconst initialState = {\r\n    suraNumbers: [],\r\n    suraNames: [],\r\n    allSurasBoxs: []\r\n}\r\n\r\nconst myReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case 'surahNumbers':\r\n            return { ...state, suraNumbers: [...action.numbers] }\r\n        case 'surahNames':\r\n            return { ...state, suraNames: [...action.names] }\r\n        case 'allSurasBoxs':\r\n            return { ...state, allSurasBoxs: [...action.allSurasBoxes] }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst ImamPage = ({ startRequest, language, suras, successRequest, failRequest, server, getData, suraLink, isFromFavouritePlaylist, showPlayer, addToPlaylist, playlist, loading, site_language, theme, themeStyle}) => {\r\n        \r\n    const [state, dispatch] = useReducer(myReducer, initialState);\r\n    const [search, setSearch] = useState('');\r\n    const [filterSearch, setFilterSearch] = useState();\r\n\r\n    useEffect(() => {\r\n        let isCurrent = true\r\n        const api = () => {\r\n            startRequest();\r\n            axios.get(`/translations?languages=${language.lang}`)\r\n            .then(res => {\r\n                if (isCurrent) {\r\n                    dispatch({type: 'surahNumbers', numbers: suras});\r\n                    successRequest();\r\n                    let arrayNames = [];\r\n                    if(suras) {\r\n                        suras.map(num => arrayNames.push(res.data[language.lang][`sura${num}`]));\r\n                    }\r\n                    dispatch({type: 'surahNames', names: arrayNames})\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (isCurrent) {\r\n                    failRequest(error)\r\n                }\r\n            });\r\n        }\r\n\r\n        api();\r\n\r\n        return () => {\r\n            isCurrent = false;\r\n        }\r\n    }, [language.lang]);\r\n\r\n    const clickedHandler = (index) => {\r\n        let fixNum = index.length === 1 ? `00${index}` : index.length === 2 ? `0${index}` : index;\r\n        suraLink(`${server}/${fixNum}.mp3`);\r\n        isFromFavouritePlaylist(false);\r\n        showPlayer();\r\n    }\r\n\r\n    const addFavFun = (data, num, suraName) => {\r\n        let setData = {...data, number: num};\r\n        const collectData = {allDataPlaylist: data, isFavorite: setData.isFavorite, server: `${setData.allData.Server}/${setData.number}.mp3`, number: setData.number, name: setData.allData.name, rewaya: setData.allData.rewaya, suraName: suraName};\r\n        addToPlaylist(collectData);\r\n    }\r\n\r\n    useEffect(() => {\r\n        let array2 = [];\r\n        state.allSurasBoxs.filter(sura => {\r\n            if(search === '') {\r\n                array2 = [state.allSurasBoxs];\r\n                setFilterSearch(array2);\r\n            } else if(sura.props.name.toLocaleLowerCase().includes(search.toLocaleLowerCase())) {\r\n                array2.push(\r\n                    <SurahBox\r\n                    key={`${server}/${sura.props.name}/${sura.props.number}/${sura.props.isFavor}`}\r\n                    name={sura.props.name}\r\n                    server={sura.props.server}\r\n                    number={sura.props.number}\r\n                    clicked={() => clickedHandler(sura.props.number)}\r\n                    addFav={(data) => addFavFun(data, sura.props.number, sura.props.name)}\r\n                    isFavor={sura.props.isFavor}\r\n                    allData={sura.props.allData}\r\n                    copyText={sura.props.copyText}\r\n                />);\r\n            }\r\n            return array2;\r\n        });\r\n        setFilterSearch(array2);\r\n    }, [search]);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n    }, []);\r\n\r\n    let data = <Loader />;\r\n\r\n    let arr = [];\r\n    const suraLoop = () => {\r\n        let sing= null;\r\n        if(server && state.suraNames && state.suraNumbers && state.suraNumbers.length > 0 && state.suraNumbers) {\r\n            if(playlist && playlist.length > 0) {\r\n                for(let i=0; i < state.suraNumbers.length; i++) {\r\n                    let myNumber= null;\r\n                    let successFav = false;\r\n                    myNumber = state.suraNumbers[i].length === 1 ? `00${state.suraNumbers[i]}` : state.suraNumbers[i].length === 2 ? `0${state.suraNumbers[i]}` : state.suraNumbers[i];\r\n                    for (let k=0; k < playlist.length; k++) {\r\n                        sing= getData.name === playlist[k].name && myNumber === playlist[k].number && `${getData.Server}/${myNumber}.mp3` === playlist[k].server && state.suraNames[i] === playlist[k].suraName;\r\n                        if(sing){\r\n                            successFav = sing;\r\n                        }\r\n                    }\r\n\r\n                    arr.push(\r\n                        <SurahBox\r\n                            key={`${server}/${state.suraNames[i]}/${myNumber}`}\r\n                            name={state.suraNames[i]}\r\n                            server={getData.Server}\r\n                            number={myNumber}\r\n                            clicked={() => clickedHandler(state.suraNumbers[i])}\r\n                            addFav={(data) => addFavFun(data, myNumber, state.suraNames[i])}\r\n                            isFavor={successFav}\r\n                            allData={getData}\r\n                            copyText={`${server}/${myNumber}.mp3`}\r\n                        />\r\n                    )\r\n                }\r\n            } else {\r\n                for(let i=0; i < state.suraNumbers.length; i++){\r\n                    let myNumbers= null;\r\n                    let successFavs = false;\r\n                    myNumbers = state.suraNumbers[i].length === 1 ? `00${state.suraNumbers[i]}` : state.suraNumbers[i].length === 2 ? `0${state.suraNumbers[i]}` : state.suraNumbers[i];\r\n                    arr.push(\r\n                        <SurahBox\r\n                            key={`${server}/${state.suraNames[i]}/${myNumbers}`}\r\n                            name={state.suraNames[i]}\r\n                            server={getData.Server}\r\n                            number={myNumbers}\r\n                            clicked={() => clickedHandler(state.suraNumbers[i])}\r\n                            addFav={(data) => addFavFun(data, myNumbers, state.suraNames[i])}\r\n                            isFavor={successFavs}\r\n                            allData={getData}\r\n                            copyText={`${server}/${myNumbers}.mp3`}\r\n                        />\r\n                    )\r\n                }\r\n            }\r\n        }\r\n        setFilterSearch(arr);\r\n        dispatch({type: 'allSurasBoxs', allSurasBoxes: arr});\r\n    }\r\n    \r\n    useEffect(() => {\r\n        server && state.suraNames && state.suraNumbers && state.suraNumbers.length > 0 && state.suraNumbers && suraLoop();\r\n    }, [server, state.suraNames, state.suraNumbers, state.suraNumbers]);\r\n\r\n    if(!loading && site_language) {\r\n        data = (\r\n            <>\r\n                {getData === null ? <Redirect to='/' /> : null}\r\n                <ImamPageStyled theme={theme} themeStyle={themeStyle} site_lang={language.lang}>\r\n                    <div className='top-search-rewaya mb-5'>\r\n                        <div className='top-search mb-2 mb-md-0'>\r\n                            <Form>\r\n                                <Form.Control type='text' placeholder={`${language.lang === 'ar' ? '...' + site_language.search + ' ' + site_language.surah_name : site_language.search + ' ' + site_language.surah_name + '...'}`} className='rounded-pill search-filed' onChange={e => setSearch(e.target.value)} dir='auto' />\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n                    <ul className='all-surah-name'>\r\n                        {filterSearch}\r\n                    </ul>\r\n                </ImamPageStyled>\r\n            </>\r\n        )\r\n    }\r\n    return data;\r\n};\r\n\r\nconst mapStateToprops = state => ({\r\n    getData: state.getData.getData,\r\n    suras: state.getData.suras,\r\n    loading: state.getData.loading,\r\n    server: state.getData.server,\r\n    playlist: state.fav.playlist,\r\n    theme: state.theme.theme,\r\n    themeStyle: state.theme.themeStyle,\r\n    language: state.lang.language,\r\n    site_language: state.lang.site_language\r\n})\r\n\r\nconst mapDispatchToprops = dispatch => ({\r\n    showPlayer: () => dispatch(settingActions.showPlayer()),\r\n    suraLink: (link) => dispatch(getDataActions.suraLink(link)),\r\n    startRequest: () => dispatch(getDataActions.startRequest()),\r\n    successRequest: () => dispatch(getDataActions.successRequest()),\r\n    failRequest: (error) => dispatch(getDataActions.failRequest(error)),\r\n    addToPlaylist: (item) => dispatch(favoriteActions.addToPlayList(item)),\r\n    isFromFavouritePlaylist: (bool) => dispatch(favoriteActions.isFromFavouritePlaylist(bool)),\r\n})\r\n\r\nexport default connect(mapStateToprops, mapDispatchToprops)(ErrorHandler(ImamPage, axios));"]},"metadata":{},"sourceType":"module"}